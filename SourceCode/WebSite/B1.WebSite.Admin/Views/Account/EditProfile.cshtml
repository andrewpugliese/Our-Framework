@using B1.WebSite.Admin;
@model B1.WebSite.Admin.Models.EditProfileModel

<script src="@Url.Content("~/Scripts/jquery-1.4.4.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui.js")" type="text/javascript"></script>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/B1.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/ddsmoothmenu.js")" type="text/javascript"></script>

<script type="text/javascript">

    function changeContainer(returnElement) {
        if (returnElement === true) {
            return $('#ChangedFields').get(0);
        }
        else return $('#ChangedFields');
    }

    function changeHandler(changedField) {
        if (changedField.name === changeContainer(true).name) {
            return;
        }

        if (changeContainer(false).val().indexOf(changedField.name) === -1) {
            changeContainer(false).val(changeContainer(false).val() + changedField.name + ',')
            $("input[type=submit]").removeAttr('disabled');
        }
    }

    $(document).ready(function () {
        $('#UserId').attr('readonly', 'true');
        changeContainer(false).hide();
        $("input[type=submit]").attr('disabled', 'disabled');
        $('input:text').change(function () { changeHandler(this); });
    });

    </script>

@{
    ViewBag.Title = "Edit Profile Settings";
    }
    
<h2>@ViewBag.Title</h2>
<p>
    Please review / edit your profile settings.
</p>


@Html.ValidationSummary(true, "Edit Profile was unsuccessful. Please correct the errors and try again.")

@using (Html.BeginForm())
{
    <div>
        <fieldset>
            <legend>Account Profile</legend>

            <div class="column1of2">
            <div class="editor-label">
                @Html.LabelFor(m => m.UserId)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.UserId)
                @Html.ValidationMessageFor(m => m.UserId)
            </div>

            <div class="editor-label">
                @Html.LabelFor(m => m.FirstName)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.FirstName)
                @Html.ValidationMessageFor(m => m.FirstName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(m => m.LastName)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.LastName)
                @Html.ValidationMessageFor(m => m.LastName)
            </div>

           <div class="editor-label">
                @Html.LabelFor(m => m.EmailAddress)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.EmailAddress)
                @Html.ValidationMessageFor(m => m.EmailAddress)
            </div>
            </div>

            <div class="column2of2" >
            <div class="editor-label">
                @Html.LabelFor(m => m.MiddleName)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.MiddleName)
                @Html.ValidationMessageFor(m => m.MiddleName)
            </div>

           <div class="editor-label">
                @Html.LabelFor(m => m.NamePrefix)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.NamePrefix)
                @Html.ValidationMessageFor(m => m.NamePrefix)
            </div>

           <div class="editor-label">
                @Html.LabelFor(m => m.NameSuffix)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.NameSuffix)
                @Html.ValidationMessageFor(m => m.NameSuffix)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.ChangedFields)
            </div>
            </div>

            <p>
                <input id="SubmitSave" type="submit" value="Save" />
                @Html.ActionLink("Cancel", Constants.EditProfile, Constants.Account)
            </p>
        </fieldset>
    </div>
}
